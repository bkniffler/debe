<html>
  <head>
    <script src="../../lib/core/index.umd.js"></script>
    <script src="../../lib/memory/index.umd.js"></script>
    <script>
      console.log(window.debe);
      const MemoryDebe = window.debe.MemoryDebe;
      async function work(changeListener) {
        const db = new MemoryDebe({ changeListener });
        await db.initialize();
        const items = [];
        const length = 100000;
        for (var i = 0; i < length; i++) {
          items.push({
            // id: i,
            name: 'item' + i
          });
        }
        const start = new Date().getTime();
        await db.insert('lorem', items);
        console.log(
          `Created ${length} items in ${new Date().getTime() - start}`
        );
        await db.all('lorem');
      }
      work(true).then(x => work(false));
    </script>
  </head>
</html>
